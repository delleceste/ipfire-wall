#############################################################################
# Makefile for building: iqfire
# Generated by qmake (2.01a) (Qt 4.3.3) on: Fri Feb 8 09:39:25 2008
# Project:  ipfire.pro
# Template: app
# Command: /usr/bin/qmake -unix -o Makefile ipfire.pro
#############################################################################

####### Compiler, tools and options

CC            = gcc
CXX           = g++
DEFINES       = -DENABLE_RULENAME -g
CFLAGS        = -pipe -O2  $(DEFINES)
LIBCFLAGS     = $(CFLAGS) -fPIC
INCPATH       = -Isrc/includes -I. -I. -Ig_getcharlib -I..
LINK	      = gcc 
LFLAGS        = -L. -lipfire_common 
LIBLFLAGS     = -shared  -Wl,-soname,libipfire_common.so
LIBS          = 
AR            = ar cqs
RANLIB        = 
QMAKE         = /usr/bin/qmake
TAR           = tar -cf
COMPRESS      = gzip -9f
COPY          = cp -f
SED           = sed
COPY_FILE     = $(COPY)
COPY_DIR      = $(COPY) -r
INSTALL_FILE  = install -m 644 -p
INSTALL_DIR   = $(COPY_DIR)
INSTALL_PROGRAM = install -m 755 -p
DEL_FILE      = rm -f
SYMLINK       = ln -sf
DEL_DIR       = rmdir
MOVE          = mv -f
CHK_DIR_EXISTS= test -d
MKDIR         = mkdir -p
LD	      = ld



####### Output directory

OBJECTS_DIR   = ./

####### Files

SOURCES       = src/interface.c \
		src/common.c \
		src/interface_functions.c \
		src/filter.c \
		src/ipfire_userspace.c \
		src/languages.c \
		src/libnetl.c \
		src/mailer.c \
		src/print_utils.c \
		src/resolver.c \
		src/semafori.c \
		src/utils.c \
		g_getcharlib/g_getcharlib.c \
		src/init_confdir.c \
		src/proc.c
		
OBJECTS       = obj/interface.o \
		obj/interface_functions.o \
		obj/ipfire_userspace.o \
		obj/mailer.o \
		obj/print_utils.o \
		obj/resolver.o \
		obj/semafori.o \
		obj/g_getcharlib.o

LIBOBJECTS    = obj/common.o \
 		obj/libnetl.o \
 		obj/languages.o \
 		obj/utils.o \
		obj/filter.o \
 		obj/init_confdir.o \
 		obj/proc.o

DESTDIR       = 
TARGET        = ipfire
LIBTARGET     = libipfire_common.so

first: all
####### Implicit rules

.SUFFIXES: .o .c

.c.o:
	$(CC) -c $(CFLAGS) $(INCPATH) -o "$@" "$<"

####### Build rules

all: message $(LIBTARGET) $(TARGET)

$(TARGET):  $(OBJECTS)  
	$(LINK) $(LFLAGS) -o $(TARGET) $(OBJECTS) $(OBJCOMP) $(LIBS)

commonlib: message $(LIBTARGET)

$(LIBTARGET):  $(LIBOBJECTS)
	$(LINK) $(LIBLFLAGS)  -o $(LIBTARGET) $(LIBOBJECTS) $(LIBS)



clean: 
	 $(DEL_FILE) $(OBJECTS)
	  $(DEL_FILE) $(LIBOBJECTS)
	 $(DEL_FILE) *~ core *.core
	 $(DEL_FILE) $(TARGET)
	 $(DEL_FILE) $(LIBTARGET)

message:
	@echo Writing build information on src/includes/build.h ...
	echo "" > src/includes/build.h
	printf "/* Compilation system and compilation date.\n * Written by Makefile (userspace) */\n#define _BUILD_DATE \"%s %s %s %s %s %s\"\n#define _BUILD_SYS \"%s %s %s\"\n\n" `date`  `uname -sro` > src/includes/build.h
	@echo


####### Compile

obj/interface.o: src/interface.c src/includes/libnetl.h \
#		src/includes/kincludes/netlink.h \
		src/includes/ipfire_userspace.h \
		src/includes/build.h \
		src/includes/colors.h \
		src/includes/ipfire_structs.h \
		src/includes/list.h \
		g_getcharlib/g_getcharlib.h \
		src/includes/interface.h \
		src/includes/semafori.h \
		src/includes/mailer.h \
		src/includes/languages.h
	$(CC) -c $(CFLAGS) $(INCPATH) -o obj/interface.o src/interface.c

obj/common.o: src/common.c src/includes/ipfire_structs.h \
		src/includes/list.h \
		src/includes/ipfire_userspace.h \
		src/includes/build.h \
		src/includes/libnetl.h \
#		src/includes/kincludes/netlink.h \
		src/includes/colors.h \
		src/includes/languages.h
	$(CC) -c $(LIBCFLAGS) $(INCPATH) -o obj/common.o src/common.c

obj/interface_functions.o: src/interface_functions.c src/includes/ipfire_userspace.h \
		src/includes/build.h \
		src/includes/libnetl.h \
#		src/includes/kincludes/netlink.h \
		src/includes/colors.h \
		src/includes/ipfire_structs.h \
		src/includes/list.h \
		src/includes/filter.h \
		g_getcharlib/g_getcharlib.h \
		src/includes/interface.h \
		src/includes/mailer.h \
		src/includes/languages.h
	$(CC) -c $(CFLAGS) $(INCPATH) -o obj/interface_functions.o src/interface_functions.c

obj/filter.o: src/filter.c src/includes/ipfire_userspace.h \
		src/includes/build.h \
		src/includes/libnetl.h \
#		src/includes/kincludes/netlink.h \
		src/includes/colors.h \
		src/includes/ipfire_structs.h \
		src/includes/list.h \
		src/includes/filter.h \
		src/includes/languages.h
	$(CC) -c $(LIBCFLAGS) $(INCPATH) -o obj/filter.o src/filter.c

obj/ipfire_userspace.o: src/ipfire_userspace.c src/includes/ipfire_userspace.h \
		src/includes/build.h \
		src/includes/libnetl.h \
#		src/includes/kincludes/netlink.h \
		src/includes/colors.h \
		src/includes/ipfire_structs.h \
		src/includes/list.h \
		src/includes/languages.h \
		src/includes/interface.h \
		src/includes/semafori.h
	$(CC) -c $(CFLAGS) $(INCPATH) -o obj/ipfire_userspace.o src/ipfire_userspace.c

obj/languages.o: src/languages.c src/includes/languages.h \
		src/includes/colors.h \
		src/includes/ipfire_userspace.h \
		src/includes/build.h \
		src/includes/libnetl.h \
#		src/includes/kincludes/netlink.h \
		src/includes/ipfire_structs.h \
		src/includes/list.h
	$(CC) -c $(LIBCFLAGS) $(INCPATH) -o obj/languages.o src/languages.c

obj/libnetl.o: src/libnetl.c src/includes/libnetl.h \
#		src/includes/kincludes/netlink.h
	$(CC) -c $(LIBCFLAGS) $(INCPATH) -o obj/libnetl.o src/libnetl.c

obj/mailer.o: src/mailer.c src/includes/ipfire_userspace.h \
		src/includes/build.h \
		src/includes/libnetl.h \
#		src/includes/kincludes/netlink.h \
		src/includes/colors.h \
		src/includes/ipfire_structs.h \
		src/includes/list.h \
		src/includes/mailer.h \
		src/includes/interface.h \
		src/includes/languages.h
	$(CC) -c $(CFLAGS) $(INCPATH) -o obj/mailer.o src/mailer.c

obj/print_utils.o: src/print_utils.c src/includes/utils.h \
		src/includes/colors.h \
		src/includes/log_codes.h \
		src/includes/languages.h \
		src/includes/ipfire_structs.h \
		src/includes/list.h
	$(CC) -c $(CFLAGS) $(INCPATH) -o obj/print_utils.o src/print_utils.c

obj/resolver.o: src/resolver.c src/includes/resolver.h \
		src/includes/colors.h \
		src/includes/semafori.h
	$(CC) -c $(CFLAGS) $(INCPATH) -o obj/resolver.o src/resolver.c


obj/semafori.o: src/semafori.c src/includes/semafori.h \
		src/includes/colors.h \
		src/includes/ipfire_userspace.h \
		src/includes/build.h \
		src/includes/libnetl.h \
#		src/includes/kincludes/netlink.h \
		src/includes/ipfire_structs.h \
		src/includes/list.h
	$(CC) -c $(CFLAGS) $(INCPATH) -o obj/semafori.o src/semafori.c

obj/utils.o: src/utils.c src/includes/utils.h \
		src/includes/colors.h \
		src/includes/log_codes.h \
		src/includes/languages.h \
		src/includes/ipfire_structs.h \
		src/includes/list.h
	$(CC) -c $(LIBCFLAGS) $(INCPATH) -o obj/utils.o src/utils.c
	
obj/g_getcharlib.o: g_getcharlib/g_getcharlib.c g_getcharlib/g_getcharlib.h
	$(CC) -c $(CFLAGS) $(INCPATH) -o obj/g_getcharlib.o g_getcharlib/g_getcharlib.c


#include "includes/ipfire_userspace.h"
#include "includes/languages.h"

obj/init_confdir.o: src/init_confdir.c \
		src/includes/colors.h \
		src/includes/languages.h \
		src/includes/ipfire_userspace.h
		
	$(CC) -c $(LIBCFLAGS) $(INCPATH) -o obj/init_confdir.o src/init_confdir.c

obj/proc.o:	src/proc.c \
		src/languages.c \
		src/includes/proc.h \
		src/includes/languages.h \
		src/includes/colors.h \
		
	$(CC) -c $(LIBCFLAGS) $(INCPATH) -o obj/proc.o src/proc.c

####### Install

install:   FORCE

uninstall:   FORCE

FORCE:

