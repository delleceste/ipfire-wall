<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="it" lang="it"><head>
	<link rel="stylesheet" href="schede.css" type="text/css" />
	<title>5. Connection redirected from external host X to internal ssh server Y </title>
</head>

<body>
<!--  - - - - - - - - - -   	TITOLO 		- - - - - - - - - - - - - -->
<div id="title" > <p> IPFIRE<em id="page" >wall </em> </p> 
</div>

<div id="back">
	
	<div id="back_index" >
		<a href="../fireindex.html" > Index</a>
	</div>
	
	<div id="home_giacomo" >
		<a href="../index.html" > Homepage di Giacomo. </a>
	</div>
	
	<div id="Scenarios_index" >
		<a href="../scenarios.html" > Scenarios index. </a>
	</div>
</div>	

<div id="content" >

<div id="titoloscen"> 
<h3> Scenario 5. <br/> 
		Destination nat: connection redirected from external host X to internal ssh server Y. </h3>
</div>

<div id="fig1">
	<img src="pngs/5-ext-int.png"  
			alt="158.110.144.168->80.104.111.96:222 becomes 158.110.144.168->192.168.0.2:22" 
 			title="External - internal DNAT" /> </img>
	</div>
	


<div id="scena"> 
	<p>
		
	 	External host primergy.dimi.uniud.it contacts ssh server on 80.104.111.96, port 222.
	 	Really, connections towards port 222 in network gateway are IPFIRE-redirected to an
	 	internal ssh server on 192.168.0.2. So, external node will communicate with the internal
	 	host 192.168.0.2, port 22. This is a failry frequent case in which one wants to redirect 
	 	connections towards an internal server, e.g. a web or DNS server. <br/>
	 	In the picture below you can see what happens. Note that 192.168.0.2 sees traffic as 
	 	coming from the real external host, and responds to it directly, always passing through
	 	IPFIRE gateway, of course (a port de-dnat translation is still needed). <br/>
	 	This kind of external - internal translation differs in behaviour if compared to internal - internal
	 	one: the former requires a step less than the latter. This is due to the fact that in every case
	 	internal host that is contacted by an external one responds through the gateway and the 
	 	external machine always talks towards external IP gateway's address. In internal redirection
	 	instead, if A talks to B and gets redirected to C, A waits for answers from B, not from C. At the same
	 	time, C needs to talk to B, it does not know that connection was setup by A.
	</p>
</div>

<div id="ipfire_output">

<a href="jpegs/5-fire.gif" > <img src="jpegs/5-fire-little.gif" 
			alt="Ipfire output, scenario 5" 
 			title="Ipfire output, DNAT scenario 5" /> </a>

<p> In the picture above, you can see what happens in IPFIRE destination nat. </p>
</div>
</div> <!-- content -->


<div id="w3c" >
	<p id="validation">
 	     <a href="http://validator.w3.org/check?uri=referer"><img
   	       src="http://www.w3.org/Icons/valid-xhtml10"
    	      alt="Valid XHTML 1.0!" height="31" width="88" /></a>
	</p>
</div>	
      
    
<div id="foot_jumps" >  
 	<a href="#title" title="top_of_page"> 
		Top of page</a>  <br />
	<a href="../fireindex.html" title="foot_back_to_index"> 
		Back to index</a>
	<br/>
	<a href="./scen6.html" title="foot_next"> 
		Next page (Scenario 6)</a> <br/>
	<a href="./scen4.html" title="foot_prev"> 
		Previous page (Scenario 4)</a>
</div>
	
</body>
</html>