<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="it" lang="it"><head>
	<link rel="stylesheet" href="schede.css" type="text/css" />
	<title> 8. A connection towards an external DNS server gets redirected to 
				the internal DNS server  </title>
</head>

<body>
<!--  - - - - - - - - - -   	TITOLO 		- - - - - - - - - - - - - -->
<div id="title" > <p> IPFIRE<em id="page" >wall </em> </p> 
</div>

<div id="back">
	
	<div id="back_index" >
		<a href="../fireindex.html" > Index</a>
	</div>
	
	<div id="home_giacomo" >
		<a href="../index.html" > Homepage di Giacomo. </a>
	</div>
	
	<div id="Scenarios_index" >
		<a href="../scenarios.html" > Scenarios index. </a>
	</div>
</div>	

<div id="content" >

<div id="titoloscen"> 
<h3> Scenario 8. <br/> 
		A connection towards an external DNS server gets redirected to 
				the internal DNS server. </h3>
</div>

<div id="fig1">
	<img src="pngs/8-dns-server-example.png"  
			alt="DNS internal server" 
 			title="DNS server" /> </img>
	</div>
	


<div id="scena"> 
	<p>
		
	 	Host 192.168.0.3 outputs a DNS query to the DNS server specified in <em>resolv.conf</em>.
	 	Network gateway intercepts DNS queries directed to port 53, not coming from the internal 
	 	DNS server, and forwards them to the internal DNS server 192.168.0.2 (steps 1 and 2). <br/>
	 	Suppose that the DNS server in the private LAN has not in cache the query just received: it then
	 	has to connect to an external DNS server, let's say 212.216.112.112, obtaining finally an answer
	 	(steps 3, 4, 5 and 6). Note that DNS response is depicted in violet. The following stage concerns 
	 	the delivering of the DNS response first requested by 192.168.0.3 (steps 7 and 8).
	 	In blue color the path expected by the first machine, unaware of the redirection.
	</p>
</div>

<div id="ipfire_output">

<a href="jpegs/8-fire.gif" > <img src="jpegs/8-fire-little.gif" 
			alt="Ipfire output, scenario 8" 
 			title="Ipfire output, DNAT scenario 8" /> </a>

<p> Communication details for DNS server redirection, gateway's point of view</p>
</div>

<div id="dns_transparent_to_0.3">

<a href="jpegs/dns_transparent_to_0_3.gif" > <img src="jpegs/dns_transparent_to_0_3-little.gif" 
			alt="DNS query from 192.168.0.3's point of view" 
 			title="DNS query from 192.168.0.3's point of view.." /> </a>

<p> DNS query is transparent from 192.168.0.3's point of view. </p>
</div>

</div> <!-- content -->


<div id="w3c" >
	<p id="validation">
 	     <a href="http://validator.w3.org/check?uri=referer"><img
   	       src="http://www.w3.org/Icons/valid-xhtml10"
    	      alt="Valid XHTML 1.0!" height="31" width="88" /></a>
	</p>
</div>	
      
    
<div id="foot_jumps" >  
 	<a href="#title" title="top_of_page"> 
		Top of page</a>  <br />
	<a href="../fireindex.html" title="foot_back_to_index"> 
		Back to index</a>
	<br/>
	<a href="../scenarios.html" title="foot_next"> 
		Return to scenarios index</a> <br/>
	<a href="./scen7.html" title="foot_prev"> 
		Previous page (Scenario 7)</a>
</div>
	
</body>
</html>